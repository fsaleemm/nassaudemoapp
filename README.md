# Search Demo App

This is a demo application that is intended to be an illustration of how to index the output of the S2T data generated by the [solution accelerator](https://github.com/Azure-Samples/cognitive-services-speech-sdk/blob/master/samples/batch/batch-ingestion-client/Setup/guide.md). The search application will display top 100 search results and sample filters for demonstrating the search of the S2T transcription.

![Result Display](/images/result.JPG)

## Architecture
[![Deploy to Azure](https://aka.ms/deploytoazurebutton)](/templates/template.json)

[TBD]

## High Level Setup Steps

1. Copy the [sample data](/searchqueryapp/SampleData) into the searchsource container. This container is the output storage container of the S2T solution accelerator.
1. Follow instruction on [How to index JSON blobs using a Blob indexer in Azure Cognitive Search](https://docs.microsoft.com/en-us/azure/search/search-howto-index-json-blobs#:~:text=Parsing%20modes%20%20%20%20parsingMode%20%20,mode%20if%20your%20blobs%20consist%20o%20..., "") to index JSON in the SampleData folder.
    1. For Step 3 in instructions, select Parsing mode as JSON, and the searchsource storage container.
    2. For step 5 in instructions, set index attributes as specified in the screenshot shown below:
    ![Index Definition](/images/indexdefinition.JPG)
1. Enable Authentication on the App Service. For simplicity [create new app registration automatically](https://docs.microsoft.com/en-us/azure/app-service/configure-authentication-provider-aad#-create-a-new-app-registration-automatically)
1. [Get the Search Service Endpoint and Key](https://docs.microsoft.com/en-us/azure/search/search-semi-structured-data#get-a-key-and-url) and fill in the the endpoint url and the api key. The index name is set in the indexer creation step above.

  ```json
  [
    {
      "name": "SearchIndexName",
      "value": "<Index Name>",
      "slotSetting": false
    },
    {
      "name": "SearchServiceEndpoint",
      "value": "<EndPoint URL>",
      "slotSetting": false
    },
    {
      "name": "SearchServiceQueryApiKey",
      "value": "<API Key>",
      "slotSetting": false
    }
  ]
  ```

5. Add the [configurations to the App Service.](https://docs.microsoft.com/en-us/azure/app-service/configure-common#edit-in-bulk).
1. Lauch the app.

Disclaimer: This is a sample application with rudimentary error/exception handling and no unit testing. It is intended as an illustration/demo and not for production use.
